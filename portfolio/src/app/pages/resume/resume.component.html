<div class="resume-container" [attr.data-template]="profile?.resumeType || 'modern'" *ngIf="!loading">
  
  <!-- Header Section with Profile -->
  <header class="resume-header" *ngIf="profile">
    <div class="profile-section">
      <div class="profile-image">
        <img [src]="profile.profileImage" [alt]="profile.fullName">
      </div>
      <div class="profile-info">
        <h1>{{profile.fullName}}</h1>
        <h2>{{profile.title}}</h2>
        <p class="bio">{{profile.bio}}</p>
        
        <div class="contact-info">
          <span>ğŸ“§ {{profile.email}}</span>
          <span *ngIf="profile.phone">ğŸ“± {{profile.phone}}</span>
          <span *ngIf="profile.location">ğŸ“ {{profile.location}}</span>
        </div>

        <div class="social-links">
          <a *ngIf="profile.socialLinks?.youtube" [href]="profile.socialLinks.youtube" target="_blank" class="social-btn youtube">
            ğŸ“º YouTube
          </a>
          <a *ngIf="profile.socialLinks?.linkedin" [href]="profile.socialLinks.linkedin" target="_blank" class="social-btn linkedin">
            ğŸ’¼ LinkedIn
          </a>
          <a *ngIf="profile.socialLinks?.github" [href]="profile.socialLinks.github" target="_blank" class="social-btn github">
            ğŸ™ GitHub
          </a>
          <a *ngIf="profile.socialLinks?.twitter" [href]="profile.socialLinks.twitter" target="_blank" class="social-btn twitter">
            ğŸ¦ Twitter
          </a>
        </div>

        <div class="status-badges">
          <span class="badge experience">{{profile.yearsOfExperience}}+ Years Experience</span>
          <span class="badge available" *ngIf="profile.availableForWork">ğŸŸ¢ Available for Work</span>
          <span class="badge resume-type">{{profile.resumeType}} Layout</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Professional Summary -->
  <section class="summary-section" *ngIf="profile?.summary">
    <h2>ğŸ’¼ Professional Summary</h2>
    <p>{{profile.summary}}</p>
  </section>

  <!-- Experience Section -->
  <section class="experience-section" *ngIf="experiences.length > 0">
    <h2>ğŸ¢ Work Experience</h2>
    <div class="timeline">
      <div class="timeline-item" *ngFor="let exp of experiences">
        <div class="timeline-marker"></div>
        <div class="timeline-content">
          <div class="timeline-header">
            <div>
              <h3>{{exp.position}}</h3>
              <h4>{{exp.company}}</h4>
            </div>
            <div class="timeline-date">
              <span>{{formatDate(exp.startDate)}} - {{exp.current ? 'Present' : formatDate(exp.endDate)}}</span>
              <span class="location" *ngIf="exp.location">ğŸ“ {{exp.location}}</span>
            </div>
          </div>
          <p class="description">{{exp.description}}</p>
          <ul class="responsibilities" *ngIf="exp.responsibilities?.length">
            <li *ngFor="let resp of exp.responsibilities">{{resp}}</li>
          </ul>
          <div class="tech-tags" *ngIf="exp.technologies?.length">
            <span class="tech-tag" *ngFor="let tech of exp.technologies">{{tech}}</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Education Section -->
  <section class="education-section" *ngIf="education.length > 0">
    <h2>ğŸ“ Education</h2>
    <div class="education-grid">
      <div class="education-card" *ngFor="let edu of education">
        <div class="edu-header">
          <h3>{{edu.degree}}</h3>
          <span class="edu-date">{{formatDate(edu.startDate)}} - {{edu.current ? 'Present' : formatDate(edu.endDate)}}</span>
        </div>
        <h4>{{edu.institution}}</h4>
        <p *ngIf="edu.fieldOfStudy">{{edu.fieldOfStudy}}</p>
        <p class="grade" *ngIf="edu.grade">Grade: {{edu.grade}}</p>
        <p class="description" *ngIf="edu.description">{{edu.description}}</p>
        <ul class="achievements" *ngIf="edu.achievements?.length">
          <li *ngFor="let achievement of edu.achievements">ğŸ† {{achievement}}</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Skills Section -->
  <section class="skills-section" *ngIf="skills.length > 0">
    <h2>ğŸ› ï¸ Skills & Expertise</h2>
    
    <div class="skills-category" *ngIf="getSkillsByCategory('Frontend').length > 0">
      <h3>Frontend Development</h3>
      <div class="skills-grid">
        <div class="skill-item" *ngFor="let skill of getSkillsByCategory('Frontend')">
          <div class="skill-header">
            <span class="skill-name">{{skill.name}}</span>
            <span class="skill-percentage">{{skill.proficiency}}%</span>
          </div>
          <div class="skill-bar">
            <div class="skill-progress" [style.width.%]="skill.proficiency" [style.background]="skill.color"></div>
          </div>
          <small *ngIf="skill.yearsOfExperience">{{skill.yearsOfExperience}} years</small>
        </div>
      </div>
    </div>

    <div class="skills-category" *ngIf="getSkillsByCategory('Backend').length > 0">
      <h3>Backend Development</h3>
      <div class="skills-grid">
        <div class="skill-item" *ngFor="let skill of getSkillsByCategory('Backend')">
          <div class="skill-header">
            <span class="skill-name">{{skill.name}}</span>
            <span class="skill-percentage">{{skill.proficiency}}%</span>
          </div>
          <div class="skill-bar">
            <div class="skill-progress" [style.width.%]="skill.proficiency" [style.background]="skill.color"></div>
          </div>
          <small *ngIf="skill.yearsOfExperience">{{skill.yearsOfExperience}} years</small>
        </div>
      </div>
    </div>

    <div class="skills-category" *ngIf="getSkillsByCategory('Database').length > 0">
      <h3>Database & Storage</h3>
      <div class="skills-grid">
        <div class="skill-item" *ngFor="let skill of getSkillsByCategory('Database')">
          <div class="skill-header">
            <span class="skill-name">{{skill.name}}</span>
            <span class="skill-percentage">{{skill.proficiency}}%</span>
          </div>
          <div class="skill-bar">
            <div class="skill-progress" [style.width.%]="skill.proficiency" [style.background]="skill.color"></div>
          </div>
          <small *ngIf="skill.yearsOfExperience">{{skill.yearsOfExperience}} years</small>
        </div>
      </div>
    </div>

    <div class="skills-category" *ngIf="getSkillsByCategory('Tools').length > 0">
      <h3>Tools & Technologies</h3>
      <div class="skills-tags">
        <span class="skill-tag" *ngFor="let skill of getSkillsByCategory('Tools')">{{skill.name}}</span>
      </div>
    </div>
  </section>

  <!-- Projects/Portfolio Section -->
  <section class="projects-section" *ngIf="portfolios.length > 0">
    <h2>ğŸ“ Featured Projects</h2>
    <div class="projects-grid">
      <div class="project-card" *ngFor="let project of portfolios.slice(0, 6)">
        <div class="project-image">
          <img [src]="project.imageUrl" [alt]="project.title">
          <span class="project-badge" *ngIf="project.featured">â­ Featured</span>
        </div>
        <div class="project-content">
          <h3>{{project.title}}</h3>
          <p>{{project.description}}</p>
          <div class="project-tech">
            <span *ngFor="let tech of project.technologies?.slice(0, 4)">{{tech}}</span>
          </div>
          <div class="project-links">
            <a *ngIf="project.projectUrl" [href]="project.projectUrl" target="_blank" class="link-btn">ğŸ”— Live Demo</a>
            <a *ngIf="project.githubUrl" [href]="project.githubUrl" target="_blank" class="link-btn github">ğŸ™ GitHub</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Download & Actions -->
  <section class="actions-section" *ngIf="profile">
    <a *ngIf="profile.resumePdfUrl" [href]="profile.resumePdfUrl" download class="btn-download">
      ğŸ“„ Download Resume PDF
    </a>
    <a href="/admin" class="btn-admin">ğŸ” Admin Dashboard</a>
    <a href="/viewer" class="btn-viewer">ğŸ‘ï¸ Projects Gallery</a>
  </section>

</div>

<!-- Loading State -->
<div class="loading-container" *ngIf="loading">
  <div class="spinner"></div>
  <p>Loading Resume...</p>
</div>

<!-- Empty State -->
<div class="empty-state" *ngIf="!loading && !profile">
  <h2>ğŸ“‹ Resume Not Found</h2>
  <p>Please configure your profile in the Admin dashboard</p>
  <a href="/admin" class="btn-primary">Go to Admin</a>
</div>
